(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1192:function(t,e,a){"use strict";a.r(e);var r=a(4),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"saas-å¤šç§Ÿæˆ·ã€å­—æ®µéš”ç¦»ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#saas-å¤šç§Ÿæˆ·ã€å­—æ®µéš”ç¦»ã€‘"}},[t._v("#")]),t._v(" SaaS å¤šç§Ÿæˆ·ã€å­—æ®µéš”ç¦»ã€‘")]),t._v(" "),e("p",[t._v("æœ¬ç« èŠ‚ï¼Œå°†ä»‹ç»å¤šç§Ÿæˆ·çš„åŸºç¡€çŸ¥è¯†ã€ä»¥åŠæ€æ ·ä½¿ç”¨å¤šç§Ÿæˆ·çš„åŠŸèƒ½ã€‚")]),t._v(" "),e("p",[t._v("ç›¸å…³çš„è§†é¢‘æ•™ç¨‹ï¼š")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://t.zsxq.com/06ufyFAeM",target:"_blank",rel:"noopener noreferrer"}},[t._v("01ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ DB å°è£…ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/067eQfAQN",target:"_blank",rel:"noopener noreferrer"}},[t._v("02ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ Redis å°è£…ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/06Nnm6QBE",target:"_blank",rel:"noopener noreferrer"}},[t._v("03ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ Web ä¸ Security å°è£…ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/06AYJUR3V",target:"_blank",rel:"noopener noreferrer"}},[t._v("04ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ Job å°è£…ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/06aq3nuNF",target:"_blank",rel:"noopener noreferrer"}},[t._v("05ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ MQ ä¸ Async å°è£…ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/06vFQVJIe",target:"_blank",rel:"noopener noreferrer"}},[t._v("06ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ AOP ä¸ Util å°è£…ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/063bqRrNZ",target:"_blank",rel:"noopener noreferrer"}},[t._v("07ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„ç®¡ç†ï¼Ÿ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.zsxq.com/06rBI66yV",target:"_blank",rel:"noopener noreferrer"}},[t._v("08ã€å¦‚ä½•å®ç°å¤šç§Ÿæˆ·çš„å¥—é¤ï¼Ÿ"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"_1-å¤šç§Ÿæˆ·æ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¤šç§Ÿæˆ·æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 1. å¤šç§Ÿæˆ·æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),e("p",[t._v("å¤šç§Ÿæˆ·ï¼Œç®€å•æ¥è¯´æ˜¯æŒ‡"),e("strong",[t._v("ä¸€ä¸ª")]),t._v("ä¸šåŠ¡ç³»ç»Ÿï¼Œå¯ä»¥ä¸º"),e("strong",[t._v("å¤šä¸ª")]),t._v("ç»„ç»‡æœåŠ¡ï¼Œå¹¶ä¸”ç»„ç»‡ä¹‹é—´çš„æ•°æ®æ˜¯"),e("strong",[t._v("éš”ç¦»")]),t._v("çš„ã€‚")]),t._v(" "),e("p",[t._v("ä¾‹å¦‚è¯´ï¼Œåœ¨æœåŠ¡ä¸Šéƒ¨ç½²äº†ä¸€ä¸ª "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("ruoyi-vue-pro")]),t._v(" "),e("OutboundLink")],1),t._v("ç³»ç»Ÿï¼Œå¯ä»¥æ”¯æŒå¤šä¸ªä¸åŒçš„å…¬å¸ä½¿ç”¨ã€‚è¿™é‡Œçš„"),e("strong",[t._v("ä¸€ä¸ªå…¬å¸å°±æ˜¯ä¸€ä¸ªç§Ÿæˆ·")]),t._v("ï¼Œæ¯ä¸ªç”¨æˆ·å¿…ç„¶å±äºæŸä¸ªç§Ÿæˆ·ã€‚å› æ­¤ï¼Œç”¨æˆ·ä¹Ÿåªèƒ½çœ‹è§è‡ªå·±ç§Ÿæˆ·ä¸‹é¢çš„å†…å®¹ï¼Œå…¶å®ƒç§Ÿæˆ·çš„å†…å®¹å¯¹ä»–æ˜¯ä¸å¯è§çš„ã€‚")]),t._v(" "),e("h2",{attrs:{id:"_2-æ•°æ®éš”ç¦»æ–¹æ¡ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ•°æ®éš”ç¦»æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 2. æ•°æ®éš”ç¦»æ–¹æ¡ˆ")]),t._v(" "),e("p",[t._v("å¤šç§Ÿæˆ·çš„æ•°æ®éš”ç¦»æ–¹æ¡ˆï¼Œå¯ä»¥åˆ†æˆåˆ†æˆä¸‰ç§ï¼š")]),t._v(" "),e("ol",[e("li",[t._v("DATASOURCE æ¨¡å¼ï¼šç‹¬ç«‹æ•°æ®åº“")]),t._v(" "),e("li",[t._v("SCHEMA æ¨¡å¼ï¼šå…±äº«æ•°æ®åº“ï¼Œç‹¬ç«‹ Schema")]),t._v(" "),e("li",[t._v("COLUMN æ¨¡å¼ï¼šå…±äº«æ•°æ®åº“ï¼Œå…±äº« Schemaï¼Œå…±äº«æ•°æ®è¡¨")])]),t._v(" "),e("h3",{attrs:{id:"_2-1-datasource-æ¨¡å¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-datasource-æ¨¡å¼"}},[t._v("#")]),t._v(" 2.1 DATASOURCE æ¨¡å¼")]),t._v(" "),e("p",[t._v("ä¸€ä¸ªç§Ÿæˆ·ä¸€ä¸ªæ•°æ®åº“ï¼Œè¿™ç§æ–¹æ¡ˆçš„ç”¨æˆ·æ•°æ®éš”ç¦»çº§åˆ«æœ€é«˜ï¼Œå®‰å…¨æ€§æœ€å¥½ï¼Œä½†æˆæœ¬ä¹Ÿé«˜ã€‚")]),t._v(" "),e("img",{attrs:{src:a(469)}}),t._v(" "),e("ul",[e("li",[t._v("ä¼˜ç‚¹ï¼šä¸ºä¸åŒçš„ç§Ÿæˆ·æä¾›ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæœ‰åŠ©äºç®€åŒ–æ•°æ®æ¨¡å‹çš„æ‰©å±•è®¾è®¡ï¼Œæ»¡è¶³ä¸åŒç§Ÿæˆ·çš„ç‹¬ç‰¹éœ€æ±‚ï¼›å¦‚æœå‡ºç°æ•…éšœï¼Œæ¢å¤æ•°æ®æ¯”è¾ƒç®€å•ã€‚")]),t._v(" "),e("li",[t._v("ç¼ºç‚¹ï¼šå¢å¤§äº†æ•°æ®åº“çš„å®‰è£…æ•°é‡ï¼Œéšä¹‹å¸¦æ¥ç»´æŠ¤æˆæœ¬å’Œè´­ç½®æˆæœ¬çš„å¢åŠ ã€‚")])]),t._v(" "),e("h3",{attrs:{id:"_2-2-schema-æ¨¡å¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-schema-æ¨¡å¼"}},[t._v("#")]),t._v(" 2.2 SCHEMA æ¨¡å¼")]),t._v(" "),e("p",[t._v("å¤šä¸ªæˆ–æ‰€æœ‰ç§Ÿæˆ·å…±äº«æ•°æ®åº“ï¼Œä½†ä¸€ä¸ªç§Ÿæˆ·ä¸€ä¸ªè¡¨ã€‚")]),t._v(" "),e("img",{attrs:{src:a(470)}}),t._v(" "),e("ul",[e("li",[t._v("ä¼˜ç‚¹ï¼šä¸ºå®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„ç§Ÿæˆ·æä¾›äº†ä¸€å®šç¨‹åº¦çš„é€»è¾‘æ•°æ®éš”ç¦»ï¼Œå¹¶ä¸æ˜¯å®Œå…¨éš”ç¦»ï¼›æ¯ä¸ªæ•°æ®åº“å¯ä»¥æ”¯æŒæ›´å¤šçš„ç§Ÿæˆ·æ•°é‡ã€‚")]),t._v(" "),e("li",[t._v("ç¼ºç‚¹ï¼šå¦‚æœå‡ºç°æ•…éšœï¼Œæ•°æ®æ¢å¤æ¯”è¾ƒå›°éš¾ï¼Œå› ä¸ºæ¢å¤æ•°æ®åº“å°†ç‰µæ‰¯åˆ°å…¶ä»–ç§Ÿæˆ·çš„æ•°æ®ï¼› å¦‚æœéœ€è¦è·¨ç§Ÿæˆ·ç»Ÿè®¡æ•°æ®ï¼Œå­˜åœ¨ä¸€å®šå›°éš¾ã€‚")])]),t._v(" "),e("h3",{attrs:{id:"_2-3-column-æ¨¡å¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-column-æ¨¡å¼"}},[t._v("#")]),t._v(" 2.3 COLUMN æ¨¡å¼")]),t._v(" "),e("p",[t._v("å…±äº«æ•°æ®åº“ï¼Œå…±äº«æ•°æ®æ¶æ„ã€‚ç§Ÿæˆ·å…±äº«åŒä¸€ä¸ªæ•°æ®åº“ã€åŒä¸€ä¸ªè¡¨ï¼Œä½†åœ¨è¡¨ä¸­é€šè¿‡ "),e("code",[t._v("tenant_id")]),t._v(" å­—æ®µåŒºåˆ†ç§Ÿæˆ·çš„æ•°æ®ã€‚è¿™æ˜¯å…±äº«ç¨‹åº¦æœ€é«˜ã€éš”ç¦»çº§åˆ«æœ€ä½çš„æ¨¡å¼ã€‚")]),t._v(" "),e("img",{attrs:{src:a(471)}}),t._v(" "),e("ul",[e("li",[t._v("ä¼˜ç‚¹ï¼šç»´æŠ¤å’Œè´­ç½®æˆæœ¬æœ€ä½ï¼Œå…è®¸æ¯ä¸ªæ•°æ®åº“æ”¯æŒçš„ç§Ÿæˆ·æ•°é‡æœ€å¤šã€‚")]),t._v(" "),e("li",[t._v("ç¼ºç‚¹ï¼šéš”ç¦»çº§åˆ«æœ€ä½ï¼Œå®‰å…¨æ€§æœ€ä½ï¼Œéœ€è¦åœ¨è®¾è®¡å¼€å‘æ—¶åŠ å¤§å¯¹å®‰å…¨çš„å¼€å‘é‡ï¼›æ•°æ®å¤‡ä»½å’Œæ¢å¤æœ€å›°éš¾ï¼Œéœ€è¦é€è¡¨é€æ¡å¤‡ä»½å’Œè¿˜åŸã€‚")])]),t._v(" "),e("h3",{attrs:{id:"_2-4-æ–¹æ¡ˆé€‰æ‹©"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-æ–¹æ¡ˆé€‰æ‹©"}},[t._v("#")]),t._v(" 2.4 æ–¹æ¡ˆé€‰æ‹©")]),t._v(" "),e("img",{attrs:{src:a(472)}}),t._v(" "),e("ul",[e("li",[t._v("ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ COLUMN æ¨¡å¼ï¼Œå¼€å‘ã€è¿ç»´ç®€å•ï¼Œä»¥æœ€å°‘çš„æœåŠ¡å™¨ä¸ºæœ€å¤šçš„ç§Ÿæˆ·æä¾›æœåŠ¡ã€‚")]),t._v(" "),e("li",[t._v("ç§Ÿæˆ·è§„æ¨¡æ¯”è¾ƒå¤§ï¼Œæˆ–è€…ä¸€äº›ç§Ÿæˆ·å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ DATASOURCE æ¨¡å¼ï¼Œå½“ç„¶å®ƒä¹Ÿç›¸å¯¹å¤æ‚çš„å¤šã€‚")]),t._v(" "),e("li",[t._v("ä¸æ¨èé‡‡ç”¨ SCHEMA æ¨¡å¼ï¼Œå› ä¸ºå®ƒçš„ä¼˜ç‚¹å¹¶ä¸æ˜æ˜¾ï¼Œè€Œä¸”å®ƒçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼ŒåŒæ—¶å¯¹å¤æ‚ SQL æ”¯æŒä¸€èˆ¬ã€‚")])]),t._v(" "),e("p",[t._v("æé—®ï¼šé¡¹ç›®æ”¯æŒå“ªäº›æ¨¡å¼ï¼Ÿ")]),t._v(" "),e("p",[t._v("ç›®å‰æ”¯æŒæœ€ä¸»æµçš„ DATASOURCE å’Œ COLUMN ä¸¤ç§æ¨¡å¼ã€‚è€Œ SCHEMA æ¨¡å¼ä¸æ¨èä½¿ç”¨ï¼Œæ‰€ä»¥æš‚æ—¶ä¸è€ƒè™‘å®ç°ã€‚")]),t._v(" "),e("p",[t._v("è€ƒè™‘åˆ°è®©å¤§å®¶æ›´å¥½çš„ç†è§£ DATASOURCE å’Œ COLUMN æ¨¡å¼ï¼Œæ‹†æˆäº†ä¸¤ç¯‡æ–‡ç« ï¼š")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://doc.iocoder.cn/saas-tenant",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠSaaS å¤šç§Ÿæˆ·ã€å­—æ®µéš”ç¦»ã€‘ã€‹"),e("OutboundLink")],1),t._v("ï¼šè®²è§£ COLUMN æ¨¡å¼")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://doc.iocoder.cn/saas-tenant/dynamic",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠSaaS å¤šç§Ÿæˆ·ã€æ•°æ®åº“éš”ç¦»ã€‘ã€‹"),e("OutboundLink")],1),t._v("ï¼šè®²è§£ DATASOURCE æ¨¡å¼")])]),t._v(" "),e("h2",{attrs:{id:"_3-å¤šç§Ÿæˆ·çš„å¼€å…³"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¤šç§Ÿæˆ·çš„å¼€å…³"}},[t._v("#")]),t._v(" 3. å¤šç§Ÿæˆ·çš„å¼€å…³")]),t._v(" "),e("p",[t._v("ç³»ç»Ÿæœ‰ä¸¤ä¸ªé…ç½®é¡¹ï¼Œè®¾ç½®ä¸º "),e("code",[t._v("true")]),t._v(" æ—¶å¼€å¯å¤šç§Ÿæˆ·ï¼Œè®¾ç½®ä¸º "),e("code",[t._v("false")]),t._v(" æ—¶å…³é—­å¤šç§Ÿæˆ·ã€‚")]),t._v(" "),e("p",[t._v("æ³¨æ„ï¼Œä¸¤è€…éœ€è¦ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("é…ç½®é¡¹")]),t._v(" "),e("th",[t._v("è¯´æ˜")]),t._v(" "),e("th",[t._v("é…ç½®æ–‡ä»¶")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("yudao.server.tenant")])]),t._v(" "),e("td",[t._v("åç«¯å¼€å…³")]),t._v(" "),e("td",[e("img",{attrs:{src:a(473)}})])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("VUE_APP_TENANT_ENABLE")])]),t._v(" "),e("td",[t._v("å‰ç«¯å¼€å…³")]),t._v(" "),e("td",[e("img",{attrs:{src:a(474)}})])])])]),t._v(" "),e("p",[t._v("ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸¤ä¸ªé…ç½®é¡¹ï¼Ÿ")]),t._v(" "),e("p",[t._v("å‰ç«¯ç™»å½•ç•Œé¢éœ€è¦ä½¿ç”¨åˆ°å¤šç§Ÿæˆ·çš„é…ç½®é¡¹ï¼Œä»åç«¯åŠ è½½é…ç½®é¡¹çš„è¯ï¼Œä½“éªŒä¼šæ¯”è¾ƒå·®ã€‚")]),t._v(" "),e("h2",{attrs:{id:"_4-å¤šç§Ÿæˆ·çš„ä¸šåŠ¡åŠŸèƒ½"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¤šç§Ÿæˆ·çš„ä¸šåŠ¡åŠŸèƒ½"}},[t._v("#")]),t._v(" 4. å¤šç§Ÿæˆ·çš„ä¸šåŠ¡åŠŸèƒ½")]),t._v(" "),e("p",[t._v("å¤šç§Ÿæˆ·ä¸»è¦æœ‰ä¸¤ä¸ªä¸šåŠ¡åŠŸèƒ½ï¼š")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("ä¸šåŠ¡åŠŸèƒ½")]),t._v(" "),e("th",[t._v("è¯´æ˜")]),t._v(" "),e("th",[t._v("ç•Œé¢")]),t._v(" "),e("th",[t._v("ä»£ç ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("ç§Ÿæˆ·ç®¡ç†")]),t._v(" "),e("td",[t._v("é…ç½®ç³»ç»Ÿç§Ÿæˆ·ï¼Œåˆ›å»ºå¯¹åº”çš„ç§Ÿæˆ·ç®¡ç†å‘˜")]),t._v(" "),e("td",[e("img",{attrs:{src:a(475)}})]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/tenant/TenantServiceImpl.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("åç«¯ "),e("OutboundLink")],1),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/tenant/index.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‰ç«¯"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("ç§Ÿæˆ·å¥—é¤")]),t._v(" "),e("td",[t._v("é…ç½®ç§Ÿæˆ·å¥—é¤ï¼Œè‡ªå®šæ¯ä¸ªç§Ÿæˆ·çš„èœå•ã€æ“ä½œã€æŒ‰é’®çš„æƒé™")]),t._v(" "),e("td",[e("img",{attrs:{src:a(476)}})]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/tenant/TenantPackageServiceImpl.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("åç«¯ "),e("OutboundLink")],1),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/tenantPackage/index.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‰ç«¯"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[e("strong",[t._v("ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥æ–°å¢ä¸€ä¸ªç§Ÿæˆ·ï¼Œå®ƒä½¿ç”¨ COLUMN æ¨¡å¼ã€‚")])]),t._v(" "),e("p",[t._v("â‘  ç‚¹å‡» [ç§Ÿæˆ·å¥—é¤] èœå•ï¼Œç‚¹å‡» [æ–°å¢] æŒ‰é’®ï¼Œå¡«å†™ç§Ÿæˆ·çš„ä¿¡æ¯ã€‚")]),t._v(" "),e("img",{attrs:{src:a(477)}}),t._v(" "),e("p",[t._v("â‘¡ ç‚¹å‡» [ç¡®è®¤] æŒ‰é’®ï¼Œå®Œæˆç§Ÿæˆ·çš„åˆ›å»ºï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ç§Ÿæˆ·ç®¡ç†å‘˜ã€è§’è‰²ç­‰ä¿¡æ¯ã€‚")]),t._v(" "),e("img",{attrs:{src:a(478)}}),t._v(" "),e("p",[t._v("â‘¢ é€€å‡ºç³»ç»Ÿï¼Œç™»å½•åˆšåˆ›å»ºçš„ç§Ÿæˆ·ã€‚")]),t._v(" "),e("img",{attrs:{src:a(479)}}),t._v(" "),e("p",[t._v("è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ç§Ÿæˆ·çš„åˆ›å»ºã€‚")]),t._v(" "),e("h2",{attrs:{id:"_5-å¤šç§Ÿæˆ·çš„æŠ€æœ¯ç»„ä»¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-å¤šç§Ÿæˆ·çš„æŠ€æœ¯ç»„ä»¶"}},[t._v("#")]),t._v(" 5. å¤šç§Ÿæˆ·çš„æŠ€æœ¯ç»„ä»¶")]),t._v(" "),e("p",[t._v("æŠ€æœ¯ç»„ä»¶ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("yudao-spring-boot-starter-biz-tenant")]),t._v(" "),e("OutboundLink")],1),t._v("ï¼Œå®ç°é€æ˜åŒ–çš„å¤šç§Ÿæˆ·èƒ½åŠ›ï¼Œé’ˆå¯¹ Webã€Securityã€DBã€Redisã€AOPã€Jobã€MQã€Async ç­‰å¤šä¸ªå±‚é¢è¿›è¡Œå°è£…ã€‚")]),t._v(" "),e("h3",{attrs:{id:"_5-1-ç§Ÿæˆ·ä¸Šä¸‹æ–‡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-ç§Ÿæˆ·ä¸Šä¸‹æ–‡"}},[t._v("#")]),t._v(" 5.1 ç§Ÿæˆ·ä¸Šä¸‹æ–‡")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/context/TenantContextHolder.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("TenantContextHolder "),e("OutboundLink")],1),t._v("æ˜¯ç§Ÿæˆ·ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡ ThreadLocal å®ç°ç§Ÿæˆ·ç¼–å·çš„å…±äº«ä¸ä¼ é€’ã€‚")]),t._v(" "),e("p",[t._v("é€šè¿‡è°ƒç”¨ TenantContextHolder çš„ "),e("code",[t._v("#getTenantId()")]),t._v(" "),e("strong",[t._v("é™æ€")]),t._v("æ–¹æ³•ï¼Œè·å¾—å½“å‰çš„ç§Ÿæˆ·ç¼–å·ã€‚ç»ç»ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦ã€‚")]),t._v(" "),e("h3",{attrs:{id:"_5-2-web-å±‚ã€é‡è¦ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-web-å±‚ã€é‡è¦ã€‘"}},[t._v("#")]),t._v(" 5.2 Web å±‚ã€é‡è¦ã€‘")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/web",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("web")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå‰ç«¯çš„æ¯ä¸ªè¯·æ±‚ Header "),e("strong",[t._v("å¿…é¡»")]),t._v("å¸¦ä¸Š "),e("code",[t._v("tenant-id")]),t._v("ï¼Œå€¼ä¸ºç§Ÿæˆ·ç¼–å·ï¼Œå³ "),e("code",[t._v("system_tenant")]),t._v(" è¡¨çš„ä¸»é”®ç¼–å·ã€‚")]),t._v(" "),e("img",{attrs:{src:a(480)}}),t._v(" "),e("p",[t._v("å¦‚æœä¸å¸¦è¯¥è¯·æ±‚å¤´ï¼Œä¼šæŠ¥â€œç§Ÿæˆ·çš„è¯·æ±‚æœªä¼ é€’ï¼Œè¯·è¿›è¡Œæ’æŸ¥â€é”™è¯¯æç¤ºã€‚")]),t._v(" "),e("p",[t._v("ğŸ˜œ é€šè¿‡ "),e("code",[t._v("yudao.tenant.ignore-urls")]),t._v(" é…ç½®é¡¹ï¼Œå¯ä»¥è®¾ç½®å“ªäº› URL æ— éœ€å¸¦è¯¥è¯·æ±‚å¤´ã€‚ä¾‹å¦‚è¯´ï¼š")]),t._v(" "),e("img",{attrs:{src:a(481)}}),t._v(" "),e("h3",{attrs:{id:"_5-3-security-å±‚"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-security-å±‚"}},[t._v("#")]),t._v(" 5.3 Security å±‚")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/security",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("security")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("ä¸»è¦æ˜¯æ ¡éªŒç™»å½•çš„ç”¨æˆ·ï¼Œæ ¡éªŒæ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥ç§Ÿæˆ·ï¼Œé¿å…è¶Šæƒé—®é¢˜ã€‚")]),t._v(" "),e("h3",{attrs:{id:"_5-4-db-å±‚ã€é‡è¦ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-db-å±‚ã€é‡è¦ã€‘"}},[t._v("#")]),t._v(" 5.4 DB å±‚ã€é‡è¦ã€‘")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/db",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("db")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("COLUMN æ¨¡å¼ï¼ŒåŸºäº MyBatis Plus è‡ªå¸¦çš„"),e("a",{attrs:{href:"https://baomidou.com/pages/aef2f2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¤šç§Ÿæˆ· "),e("OutboundLink")],1),t._v("åŠŸèƒ½å®ç°ã€‚")]),t._v(" "),e("p",[t._v("æ ¸å¿ƒï¼šæ¯æ¬¡å¯¹æ•°æ®åº“æ“ä½œæ—¶ï¼Œå®ƒä¼š"),e("strong",[t._v("è‡ªåŠ¨")]),t._v("æ‹¼æ¥ "),e("code",[t._v("WHERE tenant_id = ?")]),t._v(" æ¡ä»¶æ¥è¿›è¡Œç§Ÿæˆ·çš„è¿‡æ»¤ï¼Œå¹¶ä¸”åŸºæœ¬æ”¯æŒæ‰€æœ‰çš„ SQL åœºæ™¯ã€‚")]),t._v(" "),e("p",[t._v("å¦‚ä¸‹æ˜¯å…·ä½“æ–¹å¼ï¼š")]),t._v(" "),e("p",[t._v("â‘  "),e("strong",[t._v("éœ€è¦")]),t._v("å¼€å¯å¤šç§Ÿæˆ·çš„è¡¨ï¼Œå¿…é¡»æ·»åŠ  "),e("code",[t._v("tenant_id")]),t._v(" å­—æ®µã€‚ä¾‹å¦‚è¯´ "),e("code",[t._v("system_users")]),t._v("ã€"),e("code",[t._v("system_role")]),t._v(" ç­‰è¡¨ã€‚")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token identifier"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("system_role"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token identifier"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è§’è‰²ID'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token identifier"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è§’è‰²åç§°'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token identifier"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("tenant_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç§Ÿæˆ·ç¼–å·'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token identifier"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USING")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BTREE")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è§’è‰²ä¿¡æ¯è¡¨'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[t._v("å¹¶ä¸”è¯¥è¡¨å¯¹åº”çš„ DO éœ€è¦ä½¿ç”¨åˆ° "),e("code",[t._v("tenantId")]),t._v(" å±æ€§æ—¶ï¼Œå»ºè®®ç»§æ‰¿ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/db/TenantBaseDO.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("TenantBaseDO "),e("OutboundLink")],1),t._v("ç±»ã€‚")]),t._v(" "),e("p",[t._v("â‘¡ "),e("strong",[t._v("æ— éœ€")]),t._v("å¼€å¯å¤šç§Ÿæˆ·çš„è¡¨ï¼Œéœ€è¦æ·»åŠ è¡¨ååˆ° "),e("code",[t._v("yudao.tenant.ignore-tables")]),t._v(" é…ç½®é¡¹ç›®ã€‚ä¾‹å¦‚è¯´ï¼š")]),t._v(" "),e("img",{attrs:{src:a(482)}}),t._v(" "),e("p",[t._v("å¦‚æœä¸é…ç½®çš„è¯ï¼ŒMyBatis Plus ä¼šè‡ªåŠ¨æ‹¼æ¥ "),e("code",[t._v("WHERE tenant_id = ?")]),t._v(" æ¡ä»¶ï¼Œå¯¼è‡´æŠ¥ "),e("code",[t._v("tenant_id")]),t._v(" å­—æ®µä¸å­˜åœ¨çš„é”™è¯¯ã€‚")]),t._v(" "),e("h3",{attrs:{id:"_5-5-redis-å±‚ã€é‡è¦ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-redis-å±‚ã€é‡è¦ã€‘"}},[t._v("#")]),t._v(" 5.5 Redis å±‚ã€é‡è¦ã€‘")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/redis",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("redis")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("ç”±äº Redis ä¸åŒäº DB æœ‰ "),e("code",[t._v("tenant_id")]),t._v(" å­—æ®µï¼Œæ— æ³•é€šè¿‡ç±»ä¼¼ "),e("code",[t._v("WHERE tenant_id")]),t._v(" = ? çš„æ–¹å¼è¿‡æ»¤ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡åœ¨ Redis Key ä¸Šå¢åŠ  "),e("code",[t._v(":t{tenantId}")]),t._v(" åç¼€çš„æ–¹å¼ï¼Œè¿›è¡Œç§Ÿæˆ·ä¹‹é—´çš„éš”ç¦»ã€‚")]),t._v(" "),e("p",[t._v("ä¾‹å¦‚è¯´ï¼Œå‡è®¾ Redis Key æ˜¯ "),e("code",[t._v("user:%d")]),t._v("ï¼Œç¤ºä¾‹æ˜¯ "),e("code",[t._v("user:1024")]),t._v("ï¼›å¯¹åº”åˆ°å¤šç§Ÿæˆ· 1 çš„ Redis Key æ˜¯ "),e("code",[t._v("user:t1:1024")]),t._v("ã€‚")]),t._v(" "),e("p",[t._v("ä¸ºä»€ä¹ˆ Redis Key è¦å¤šç§Ÿæˆ·éš”ç¦»å‘¢ï¼Ÿ")]),t._v(" "),e("ul",[e("li",[t._v("â‘  åœ¨ä½¿ç”¨ DATASOURCE æ¨¡å¼æ—¶ï¼Œä¸åŒåº“çš„ç›¸åŒè¡¨çš„ id å¯èƒ½ç›¸åŒï¼Œä¾‹å¦‚è¯´ A åº“çš„ç”¨æˆ·ï¼Œå’Œ B åº“çš„ç”¨æˆ·éƒ½æ˜¯ 1024ï¼Œç›´æ¥ç¼“å­˜ä¼šå­˜åœ¨ Redis Key çš„å†²çªã€‚")]),t._v(" "),e("li",[t._v("â‘¡ åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹ï¼Œè·¨ç§Ÿæˆ·å¯èƒ½å­˜åœ¨ç›¸åŒçš„éœ€è¦å”¯ä¸€çš„æ•°æ®ï¼Œä¾‹å¦‚è¯´ç”¨æˆ·çš„æ‰‹æœºå·ï¼Œç›´æ¥ç¼“å­˜ä¼šå­˜åœ¨ Redis Key çš„å†²çªã€‚")])]),t._v(" "),e("h4",{attrs:{id:"ä½¿ç”¨æ–¹å¼ä¸€-åŸºäº-spring-cache-redisã€æ¨èã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨æ–¹å¼ä¸€-åŸºäº-spring-cache-redisã€æ¨èã€‘"}},[t._v("#")]),t._v(" ä½¿ç”¨æ–¹å¼ä¸€ï¼šåŸºäº Spring Cache + Redisã€æ¨èã€‘")]),t._v(" "),e("p",[t._v("åªéœ€è¦ä¸€æ­¥ï¼Œåœ¨æ–¹æ³•ä¸Šæ·»åŠ  Spring Cache æ³¨è§£ï¼Œä¾‹å¦‚è¯´ "),e("code",[t._v("@Cachable")]),t._v("ã€"),e("code",[t._v("@CachePut")]),t._v("ã€"),e("code",[t._v("@CacheEvict")]),t._v("ã€‚")]),t._v(" "),e("p",[t._v("å…·ä½“çš„å®ç°åŸç†ï¼Œå¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/redis/TenantRedisCacheManager.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("TenantRedisCacheManager "),e("OutboundLink")],1),t._v("çš„æºç ã€‚")]),t._v(" "),e("p",[t._v("æ³¨æ„ï¼ï¼ï¼é»˜è®¤é…ç½®ä¸‹ï¼ŒSpring Cache éƒ½å¼€å¯ Redis Key çš„å¤šç§Ÿæˆ·éš”ç¦»ã€‚å¦‚æœä¸éœ€è¦ï¼Œå¯ä»¥å°† Key æ·»åŠ åˆ° "),e("code",[t._v("yudao.tenant.ignore-cache")]),t._v(" é…ç½®é¡¹ä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),t._v(" "),e("img",{attrs:{src:a(483)}}),t._v(" "),e("h4",{attrs:{id:"ä½¿ç”¨æ–¹å¼äºŒ-åŸºäº-redistemplate-tenantrediskeydefine"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨æ–¹å¼äºŒ-åŸºäº-redistemplate-tenantrediskeydefine"}},[t._v("#")]),t._v(" ä½¿ç”¨æ–¹å¼äºŒï¼šåŸºäº RedisTemplate + TenantRedisKeyDefine")]),t._v(" "),e("p",[t._v("æš‚æ—¶æ²¡æœ‰åˆé€‚çš„å°è£…ï¼Œéœ€è¦åœ¨è‡ªå·± format Redis Key çš„æ—¶å€™ï¼Œæ‰‹åŠ¨å°† "),e("code",[t._v(":t{tenantId}")]),t._v(" åç¼€æ‹¼æ¥ä¸Šã€‚")]),t._v(" "),e("p",[t._v("è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘æ¨èä½ ä½¿ç”¨ Spring Cache + Redis çš„åŸå› ï¼")]),t._v(" "),e("h3",{attrs:{id:"_5-6-aopã€é‡è¦ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-aopã€é‡è¦ã€‘"}},[t._v("#")]),t._v(" 5.6 AOPã€é‡è¦ã€‘")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/aop",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("aop")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("â‘  å£°æ˜ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/aop/TenantIgnore.java",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("@TenantIgnore")]),t._v(" "),e("OutboundLink")],1),t._v("æ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œæ ‡è®°æŒ‡å®šæ–¹æ³•ä¸è¿›è¡Œç§Ÿæˆ·çš„è‡ªåŠ¨è¿‡æ»¤ï¼Œé¿å…"),e("strong",[t._v("è‡ªåŠ¨")]),t._v("æ‹¼æ¥ "),e("code",[t._v("WHERE tenant_id = ?")]),t._v(" æ¡ä»¶ç­‰ç­‰ã€‚")]),t._v(" "),e("p",[t._v("ä¾‹å¦‚è¯´ï¼š"),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/RoleServiceImpl.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("RoleServiceImpl "),e("OutboundLink")],1),t._v("çš„ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/RoleServiceImpl.java#L83-L100",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("#initLocalCache()")]),t._v(" "),e("OutboundLink")],1),t._v("æ–¹æ³•ï¼ŒåŠ è½½"),e("strong",[t._v("æ‰€æœ‰")]),t._v("ç§Ÿæˆ·çš„è§’è‰²åˆ°å†…å­˜è¿›è¡Œç¼“å­˜ï¼Œå¦‚æœä¸å£°æ˜ "),e("code",[t._v("@TenantIgnore")]),t._v(" æ³¨è§£ï¼Œä¼šå¯¼è‡´ç§Ÿæˆ·çš„è‡ªåŠ¨è¿‡æ»¤ï¼ŒåªåŠ è½½äº†æŸä¸ªç§Ÿæˆ·çš„è§’è‰²ã€‚")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RoleServiceImpl.java")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RoleServiceImpl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RoleService")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Resource")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Lazy")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å…¥è‡ªå·±ï¼Œæ‰€ä»¥å»¶è¿ŸåŠ è½½")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RoleService")]),t._v(" self"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@TenantIgnore")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿½ç•¥è‡ªåŠ¨å¤šç§Ÿæˆ·ï¼Œå…¨å±€åˆå§‹åŒ–ç¼“å­˜")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("initLocalCache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... ä»æ•°æ®åº“ä¸­ï¼ŒåŠ è½½è§’è‰²")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Scheduled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fixedDelay "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SCHEDULER_PERIOD")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initialDelay "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SCHEDULER_PERIOD")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("schedulePeriodicRefresh")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        self"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("initLocalCache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <x> é€šè¿‡ self å¼•ç”¨åˆ° Spring ä»£ç†å¯¹è±¡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br")])]),e("p",[t._v("æœ‰ä¸€ç‚¹è¦æ ¼å¤–æ³¨æ„ï¼Œç”±äº "),e("code",[t._v("@TenantIgnore")]),t._v(" æ³¨è§£æ˜¯åŸºäº Spring AOP å®ç°ï¼Œå¦‚æœæ˜¯"),e("strong",[t._v("æ–¹æ³•å†…éƒ¨çš„è°ƒç”¨")]),t._v("ï¼Œé¿å…ä½¿ç”¨ "),e("code",[t._v("this")]),t._v(" å¯¼è‡´ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥é‡‡ç”¨ä¸Šè¿°ç¤ºä¾‹çš„ `` å¤„çš„ "),e("code",[t._v("self")]),t._v(" æ–¹å¼ã€‚")]),t._v(" "),e("p",[t._v("â‘¡ ä½¿ç”¨ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/util/TenantUtils.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("TenantUtils "),e("OutboundLink")],1),t._v("çš„ "),e("code",[t._v("#execute(Long tenantId, Runnable runnable)")]),t._v(" æ–¹æ³•ï¼Œæ¨¡æ‹ŸæŒ‡å®šç§Ÿæˆ·( "),e("code",[t._v("tenantId")]),t._v(" )ï¼Œæ‰§è¡ŒæŸæ®µä¸šåŠ¡é€»è¾‘( "),e("code",[t._v("runnable")]),t._v(" )ã€‚")]),t._v(" "),e("p",[t._v("ä¾‹å¦‚è¯´ï¼šåœ¨ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/tenant/TenantServiceImpl.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("TenantServiceImpl "),e("OutboundLink")],1),t._v("çš„ "),e("code",[t._v("#createTenant(...)")]),t._v(" æ–¹æ³•ï¼Œåœ¨åˆ›å»ºå®Œç§Ÿæˆ·æ—¶ï¼Œéœ€è¦æ¨¡æ‹Ÿè¯¥ç§Ÿæˆ·ï¼Œè¿›è¡Œç”¨æˆ·å’Œè§’è‰²çš„åˆ›å»ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),t._v(" "),e("img",{attrs:{src:a(484)}}),t._v(" "),e("h3",{attrs:{id:"_5-7-jobã€é‡è¦ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-jobã€é‡è¦ã€‘"}},[t._v("#")]),t._v(" 5.7 Jobã€é‡è¦ã€‘")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/job",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("job")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("å£°æ˜ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/job/TenantJob.java",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("@TenantJob")]),t._v(" "),e("OutboundLink")],1),t._v("æ³¨è§£åœ¨ Job ç±»ä¸Šï¼Œå®ç°"),e("strong",[t._v("å¹¶è¡Œ")]),t._v("éå†æ¯ä¸ªç§Ÿæˆ·ï¼Œæ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„é€»è¾‘ã€‚")]),t._v(" "),e("h3",{attrs:{id:"_5-8-mq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-8-mq"}},[t._v("#")]),t._v(" 5.8 MQ")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/mq",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("mq")]),t._v(" "),e("OutboundLink")],1),t._v("åŒ…ã€‚")])]),t._v(" "),e("p",[t._v("é€šè¿‡ç§Ÿæˆ·å¯¹ MQ å±‚é¢çš„å°è£…ï¼Œå®ç°ç§Ÿæˆ·ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ç»§ç»­ä¼ é€’åˆ° MQ æ¶ˆè´¹çš„é€»è¾‘ä¸­ï¼Œé¿å…ä¸¢å¤±çš„é—®é¢˜ã€‚å®ç°åŸç†æ˜¯ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("å‘é€æ¶ˆæ¯æ—¶ï¼ŒMQ ä¼šå°†ç§Ÿæˆ·ä¸Šä¸‹æ–‡çš„ç§Ÿæˆ·ç¼–å·ï¼Œè®°å½•åˆ° Message æ¶ˆæ¯å¤´ "),e("code",[t._v("tenant-id")]),t._v(" ä¸Šã€‚")]),t._v(" "),e("li",[t._v("æ¶ˆè´¹æ¶ˆæ¯æ—¶ï¼ŒMQ ä¼šå°† Message æ¶ˆæ¯å¤´ "),e("code",[t._v("tenant-id")]),t._v("ï¼Œè®¾ç½®åˆ°ç§Ÿæˆ·ä¸Šä¸‹æ–‡çš„ç§Ÿæˆ·ç¼–å·ã€‚")])]),t._v(" "),e("h3",{attrs:{id:"_5-9-async"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-9-async"}},[t._v("#")]),t._v(" 5.9 Async")]),t._v(" "),e("blockquote",[e("p",[t._v("å®ç°å¯è§ "),e("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/src/main/java/cn/iocoder/yudao/framework/quartz/config/YudaoAsyncAutoConfiguration.java",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("YudaoAsyncAutoConfiguration")]),t._v(" "),e("OutboundLink")],1),t._v("ç±»ã€‚")])]),t._v(" "),e("p",[t._v("é€šè¿‡ä½¿ç”¨é˜¿é‡Œå¼€æºçš„ "),e("a",{attrs:{href:"https://github.com/alibaba/transmittable-thread-local",target:"_blank",rel:"noopener noreferrer"}},[t._v("TransmittableThreadLocal "),e("OutboundLink")],1),t._v("ç»„ä»¶ï¼Œå®ç° Spring Async æ‰§è¡Œå¼‚æ­¥é€»è¾‘æ—¶ï¼Œç§Ÿæˆ·ä¸Šä¸‹æ–‡å¯ä»¥ç»§ç»­ä¼ é€’ï¼Œé¿å…ä¸¢å¤±çš„é—®é¢˜ã€‚")])])}),[],!1,null,null,null);e.default=s.exports},469:function(t,e,a){t.exports=a.p+"assets/img/img_66.1ac8d205.png"},470:function(t,e,a){t.exports=a.p+"assets/img/img_67.2ea493af.png"},471:function(t,e,a){t.exports=a.p+"assets/img/img_68.71eb6aa0.png"},472:function(t,e,a){t.exports=a.p+"assets/img/img_69.c38ec91e.png"},473:function(t,e,a){t.exports=a.p+"assets/img/img_70.999398a2.png"},474:function(t,e,a){t.exports=a.p+"assets/img/img_71.3564143f.png"},475:function(t,e,a){t.exports=a.p+"assets/img/img_72.e9e32013.png"},476:function(t,e,a){t.exports=a.p+"assets/img/img_73.64e99c9b.png"},477:function(t,e,a){t.exports=a.p+"assets/img/img_74.9bc88920.png"},478:function(t,e,a){t.exports=a.p+"assets/img/img_75.c5e82245.png"},479:function(t,e,a){t.exports=a.p+"assets/img/img_76.fe1eeea2.png"},480:function(t,e,a){t.exports=a.p+"assets/img/img_77.9f0d2d09.png"},481:function(t,e,a){t.exports=a.p+"assets/img/img_78.fcd2347b.png"},482:function(t,e,a){t.exports=a.p+"assets/img/img_79.d95b6c34.png"},483:function(t,e,a){t.exports=a.p+"assets/img/img_80.ab08dd9a.png"},484:function(t,e,a){t.exports=a.p+"assets/img/img_81.b24acbe3.png"}}]);