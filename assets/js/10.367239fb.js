(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1187:function(s,t,a){"use strict";a.r(t);var e=a(4),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"代码生成-新增功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码生成-新增功能"}},[s._v("#")]),s._v(" 代码生成（新增功能）")]),s._v(" "),t("p",[s._v("大部分项目里，其实有很多代码是重复的，几乎每个模块都有 CRUD 增删改查的功能，而这些功能的实现代码往往是大同小异的。如果这些功能都要自己去手写，非常无聊枯燥，浪费时间且效率很低，还可能会写错。")]),s._v(" "),t("p",[s._v("所以这种重复性的代码，项目提供了 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen",target:"_blank",rel:"noopener noreferrer"}},[s._v("codegen "),t("OutboundLink")],1),s._v("代码生成器，只需要在数据库中设计好表结构，就可以一键生成前后端代码 + 单元测试 + Swagger 接口文档 + Validator 参数校验。")]),s._v(" "),t("p",[s._v("下面，我们使用代码生成器，在 "),t("code",[s._v("yudao-module-system")]),s._v(" 模块中，开发一个【"),t("strong",[s._v("用户组")]),s._v("】的功能。")]),s._v(" "),t("h2",{attrs:{id:"👍-相关视频教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#👍-相关视频教程"}},[s._v("#")]),s._v(" 👍 相关视频教程")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://t.zsxq.com/07Jm2vrzJ",target:"_blank",rel:"noopener noreferrer"}},[s._v("从零开始 05：如何 5 分钟，开发一个新功能？"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"_1-数据库表结构设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据库表结构设计"}},[s._v("#")]),s._v(" 1. 数据库表结构设计")]),s._v(" "),t("p",[s._v("设计用户组的数据库表名为 "),t("code",[s._v("system_group")]),s._v("，其建表语句如下：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("system_group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'编号'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLLATE")]),s._v(" utf8mb4_unicode_ci "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'名字'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("description"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLLATE")]),s._v(" utf8mb4_unicode_ci "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'描述'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("creator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARACTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" utf8mb4 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLLATE")]),s._v(" utf8mb4_unicode_ci "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建者'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("datetime")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("updater"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARACTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" utf8mb4 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLLATE")]),s._v(" utf8mb4_unicode_ci "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新者'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("datetime")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("deleted"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" b"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'是否删除'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("tenant_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'租户编号'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USING")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLLATE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4_unicode_ci "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户组'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("img",{attrs:{src:a(423)}}),s._v(" "),t("p",[s._v("① 表名的前缀，要和 Maven Module 的模块名保持一致。例如说，用户组在 "),t("code",[s._v("yudao-module-system")]),s._v(" 模块，所以表名的前缀是 "),t("code",[s._v("system_")]),s._v("。")]),s._v(" "),t("p",[s._v("疑问：为什么要保持一致？")]),s._v(" "),t("p",[s._v("代码生成器会自动解析表名的前缀，获得其所属的 Maven Module 模块，简化配置过程。")]),s._v(" "),t("p",[s._v("② 设置 ID 主键，一般推荐使用 "),t("code",[s._v("bigint")]),s._v(" 长整形，并设置自增长。")]),s._v(" "),t("p",[s._v("③ 正确设置每个字段是否允许空，代码生成器会根据它生成参数是否允许空的校验规则。")]),s._v(" "),t("p",[s._v("④ 正确设置注释，代码生成器会根据它生成字段名与提示等信息。")]),s._v(" "),t("p",[s._v("⑤ 添加 "),t("code",[s._v("creator")]),s._v("、"),t("code",[s._v("create_time")]),s._v("、"),t("code",[s._v("updater")]),s._v("、"),t("code",[s._v("update_time")]),s._v("、"),t("code",[s._v("deleted")]),s._v(" 是必须设置的系统字段；如果开启多租户的功能，并且该表需要多租户的隔离，则需要添加 "),t("code",[s._v("tenant_id")]),s._v(" 字段。")]),s._v(" "),t("h2",{attrs:{id:"_2-代码生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码生成"}},[s._v("#")]),s._v(" 2. 代码生成")]),s._v(" "),t("p",[s._v("① 点击 [基础设施 -> 代码生成] 菜单，点击 [基于 DB 导入] 按钮，选择 "),t("code",[s._v("system_group")]),s._v(" 表，后点击 [确认] 按钮。")]),s._v(" "),t("img",{attrs:{src:a(424)}}),s._v(" "),t("p",[s._v("代码实现？")]),s._v(" "),t("p",[s._v("可见 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen/inner/CodegenBuilder.java",target:"_blank",rel:"noopener noreferrer"}},[s._v("CodegenBuilder "),t("OutboundLink")],1),s._v("类，自动解析数据库的表结构，生成默认的配置。")]),s._v(" "),t("p",[s._v("② 点击 "),t("code",[s._v("system_group")]),s._v(" 所在行的 [编辑] 按钮，修改生成配置。后操作如下：")]),s._v(" "),t("img",{attrs:{src:a(425)}}),s._v(" "),t("img",{attrs:{src:a(426)}}),s._v(" "),t("ul",[t("li",[s._v("将 "),t("code",[s._v("status")]),s._v(" 字段的显示类型为【下拉框】，字典类型为【系统状态】。")]),s._v(" "),t("li",[s._v("将 "),t("code",[s._v("description")]),s._v(" 字段的【查询】取消。")]),s._v(" "),t("li",[s._v("将 "),t("code",[s._v("id")]),s._v("、"),t("code",[s._v("name")]),s._v("、"),t("code",[s._v("description")]),s._v("、"),t("code",[s._v("status")]),s._v(" 字段的【示例】填写上。")])]),s._v(" "),t("p",[s._v("字段信息")]),s._v(" "),t("ul",[t("li",[s._v("插入：新增时，是否传递该字段。")]),s._v(" "),t("li",[s._v("编辑：修改时，是否传递该字段。")]),s._v(" "),t("li",[s._v("列表：Table 表格，是否展示该字段。")]),s._v(" "),t("li",[s._v("查询：搜索框，是否支持该字段查询，查询的条件是什么。")]),s._v(" "),t("li",[s._v("允许空：新增或修改时，是否必须传递该字段，用于 Validator 参数校验。")]),s._v(" "),t("li",[s._v("字典类型：在显示类型是下拉框、单选框、复选框时，选择使用的字典。")]),s._v(" "),t("li",[s._v("示例：参数示例，用于 Swagger 接口文档的 "),t("code",[s._v("example")]),s._v(" 示例。")])]),s._v(" "),t("img",{attrs:{src:a(427)}}),s._v(" "),t("ul",[t("li",[s._v("将【上级菜单】设置为【系统管理】。")])]),s._v(" "),t("p",[s._v("生成信息")]),s._v(" "),t("ul",[t("li",[s._v("生成场景：分成管理后台、用户 App 两种，用于生成 Controller 放在 "),t("code",[s._v("admin")]),s._v(" 还是 "),t("code",[s._v("app")]),s._v(" 包。")]),s._v(" "),t("li",[s._v("上级菜单：生成场景是管理后台时，需要设置其所属的上级菜单。")])]),s._v(" "),t("p",[s._v("完成后，点击 [提交] 按钮，保存生成配置。")]),s._v(" "),t("p",[s._v("③ 点击 "),t("code",[s._v("system_group")]),s._v(" 所在行的 [预览] 按钮，在线预览生成的代码，检查是否符合预期。")]),s._v(" "),t("img",{attrs:{src:a(428)}}),s._v(" "),t("p",[s._v("④ 点击 "),t("code",[s._v("system_group")]),s._v(" 所在行的 [生成代码] 按钮，下载生成代码的压缩包，双击进行解压。")]),s._v(" "),t("img",{attrs:{src:a(429)}}),s._v(" "),t("p",[s._v("代码实现？")]),s._v(" "),t("p",[s._v("可见 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen/inner/CodegenEngine.java",target:"_blank",rel:"noopener noreferrer"}},[s._v("CodegenEngine "),t("OutboundLink")],1),s._v("类，基于 Velocity 模板引擎，生成具体代码。模板文件，可见 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-infra/yudao-module-infra-biz/src/main/resources/codegen",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("resources/codegen")]),s._v(" "),t("OutboundLink")],1),s._v("目录。")]),s._v(" "),t("h2",{attrs:{id:"_3-代码运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码运行"}},[s._v("#")]),s._v(" 3. 代码运行")]),s._v(" "),t("p",[s._v("本小节，我们将生成的代码，复制到项目中，并进行运行。")]),s._v(" "),t("h3",{attrs:{id:"_3-1-后端运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-后端运行"}},[s._v("#")]),s._v(" 3.1 后端运行")]),s._v(" "),t("p",[s._v("① 将生成的后端代码，复制到项目中。操作如下图所示：")]),s._v(" "),t("img",{attrs:{src:a(430)}}),s._v(" "),t("p",[s._v("② 将 "),t("code",[s._v("ErrorCodeConstants.java_手动操作")]),s._v(" 文件的错误码，复制到该模块 ErrorCodeConstants 类中，并设置对应的错误码编号，之后进行删除。操作如下图所示：")]),s._v(" "),t("img",{attrs:{src:a(431)}}),s._v(" "),t("p",[s._v("③ 将 "),t("code",[s._v("h2.sql")]),s._v(" 的 CREATE 语句复制到该模块的 "),t("code",[s._v("create_tables.sql")]),s._v(" 文件，DELETE 语句复制到该模块的 "),t("code",[s._v("clean.sql")]),s._v("。操作如下图：")]),s._v(" "),t("img",{attrs:{src:a(432)}}),s._v(" "),t("p",[s._v("疑问："),t("code",[s._v("create_tables.sql")]),s._v(" 和 "),t("code",[s._v("clean.sql")]),s._v(" 文件的作用是什么？")]),s._v(" "),t("p",[s._v("项目的单元测试，需要使用到 H2 内存数据库，"),t("code",[s._v("create_tables.sql")]),s._v(" 用于创建所有的表结构，"),t("code",[s._v("clean.sql")]),s._v(" 用于每个单元测试的方法跑完后清理数据。")]),s._v(" "),t("p",[s._v("然后，运行 GroupServiceImplTest 单元测试，执行通过。")]),s._v(" "),t("p",[s._v("④ 打开数据库工具，运行代码生成的 "),t("code",[s._v("sql/sql.sql")]),s._v(" 文件，用于菜单的初始化。")]),s._v(" "),t("img",{attrs:{src:a(433)}}),s._v(" "),t("p",[s._v("⑤ Debug 运行 YudaoServerApplication 类，启动后端项目。通过 IDEA 的 [Actuator -> Mappings] 菜单，可以看到代码生成的 GroupController 的 RESTful API 接口已经生效。")]),s._v(" "),t("img",{attrs:{src:a(434)}}),s._v(" "),t("h3",{attrs:{id:"_3-2-前端运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-前端运行"}},[s._v("#")]),s._v(" 3.2 前端运行")]),s._v(" "),t("p",[s._v("① 将生成的前端代码，复制到项目中。操作如下图所示：")]),s._v(" "),t("img",{attrs:{src:a(435)}}),s._v(" "),t("p",[s._v("② "),t("strong",[s._v("重新")]),s._v("执行 "),t("code",[s._v("npm run dev")]),s._v(" 命令，启动前端项目。点击 [系统管理 -> 用户组管理] 菜单，就可以看到用户组的 UI 界面。")]),s._v(" "),t("img",{attrs:{src:a(436)}}),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("至此，我们已经完成了【"),t("strong",[s._v("用户组")]),s._v("】功能的代码生成，基本节省了你 80% 左右的开发任务，后续可以根据自己的需求，进行剩余的 20% 的开发！")]),s._v(" "),t("h2",{attrs:{id:"_4-后续变更"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-后续变更"}},[s._v("#")]),s._v(" 4. 后续变更")]),s._v(" "),t("p",[s._v("随着业务的发展，已经生成代码的功能需要变更。继续以【"),t("strong",[s._v("用户组")]),s._v("】举例子，它的 "),t("code",[s._v("system_group")]),s._v(" 表需要新增一个分类 "),t("code",[s._v("category")]),s._v(" 字段，此时"),t("strong",[s._v("不建议")]),s._v("使用代码生成器，而是直接修改已经生成的代码：")]),s._v(" "),t("p",[s._v("① 后端：修改 GroupDO 数据实体类、GroupBaseVO 基础 VO 类、GroupExcelVO 导出结果 VO 类，新增 "),t("code",[s._v("category")]),s._v(" 字段。")]),s._v(" "),t("p",[s._v("② 前端：修改 "),t("code",[s._v("index.vue")]),s._v(" 界面的列表和表单组件，新增 "),t("code",[s._v("category")]),s._v(" 字段。")]),s._v(" "),t("p",[s._v("③ 重新编译后后端，并进行启动。")]),s._v(" "),t("p",[s._v("over！非常简单方便，即保证了代码的整洁规范，又不增加过多的开发量。")])])}),[],!1,null,null,null);t.default=r.exports},423:function(s,t,a){s.exports=a.p+"assets/img/img_16.11bf804e.png"},424:function(s,t,a){s.exports=a.p+"assets/img/img_17.36ef3a2c.png"},425:function(s,t,a){s.exports=a.p+"assets/img/img_18.ebca772e.png"},426:function(s,t,a){s.exports=a.p+"assets/img/img_19.8a244da1.png"},427:function(s,t,a){s.exports=a.p+"assets/img/img_20.224023f7.png"},428:function(s,t,a){s.exports=a.p+"assets/img/img_21.21a22a9c.png"},429:function(s,t,a){s.exports=a.p+"assets/img/img_22.110b9f1a.png"},430:function(s,t,a){s.exports=a.p+"assets/img/img_23.14dc6ac6.png"},431:function(s,t,a){s.exports=a.p+"assets/img/img_24.09bbfdd6.png"},432:function(s,t,a){s.exports=a.p+"assets/img/img_25.b337394b.png"},433:function(s,t,a){s.exports=a.p+"assets/img/img_26.4f8cf431.png"},434:function(s,t,a){s.exports=a.p+"assets/img/img_27.fefebebd.png"},435:function(s,t,a){s.exports=a.p+"assets/img/img_28.c7b2ef19.png"},436:function(s,t,a){s.exports=a.p+"assets/img/img_29.68cbc8e0.png"}}]);