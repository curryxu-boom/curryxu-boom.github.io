(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1e3:function(s,a,n){"use strict";n.r(a);var t=n(4),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"linux硬盘满了如何处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux硬盘满了如何处理"}},[s._v("#")]),s._v(" linux硬盘满了如何处理")]),s._v(" "),a("h2",{attrs:{id:"_1、确定是不是真的是磁盘空间不足"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、确定是不是真的是磁盘空间不足"}},[s._v("#")]),s._v(" 1、确定是不是真的是磁盘空间不足")]),s._v(" "),a("blockquote",[a("p",[s._v("输入命令：df –lh 查看磁盘信息")])]),s._v(" "),a("img",{attrs:{src:n(337)}}),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("很明显：挂载点 /dev/vda1 下的59G容量已经耗了18G。\n既然问题已经确定了，接下来就是处理了。\n处理方法也很简单，就是删文件。\n\n问：删除什么文件？\n答：删除占用磁盘空间大，但又无用的文件。\n\n问：什么是无用的文件？\n答：如果对系统不熟悉的话，日志可能是你第一的下手目标。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"_2、如何定位最大文件目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、如何定位最大文件目录"}},[s._v("#")]),s._v(" 2、如何定位最大文件目录")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("输入命令： "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" / 进入根目录。\n输入命令：du "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" --max-depth"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 寻找当前目录，哪个文件夹占用空间最大\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("img",{attrs:{src:n(338)}}),s._v(" "),a("img",{attrs:{src:n(339)}}),s._v(" "),a("blockquote",[a("p",[s._v("以上两个命令之后，可以看到 "),a("code",[s._v("/usr")]),s._v("和 "),a("code",[s._v("/root")]),s._v(" 此路径占用较大磁盘空间，占用了15.3G。最后一项显示19G，它表示当前目录所有文件占用磁盘空间总和容量是19G。")]),s._v(" "),a("p",[s._v("如法炮制，进入占用大的文件继续使用如上命令排查哪个文件占用空间大。")])]),s._v(" "),a("h2",{attrs:{id:"_3、如何定位最大文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、如何定位最大文件"}},[s._v("#")]),s._v(" 3、如何定位最大文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("输入命令：ls –lhS 将文件以从大到小顺序展现\n最终定位文件为：catalina.out 这个日志文件。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_4、确认文件未被占用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、确认文件未被占用"}},[s._v("#")]),s._v(" 4、确认文件未被占用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("删除文件：rm –f catalina.out \n\n辛苦一阵找到文件，删除了很开心，输入命令：df –lh 发现磁盘空间仍是满的状态。跟之前完全没有区别。难道说是需要重启系统吗？linux会这么不友好么？\n\n谷歌一下，发现了这么一段话：\n\n在Linux或者Unix系统中，通过rm或者文件管理器删除文件将会从文件系统的目录结构上解除链接(unlink).然而如果文件是被打开的（有一个进程正在使用），那么进程将仍然可以读取该文件，磁盘空间也一直被占用。\n\n输入命令：/usr/sbin/lsof|grep deleted 确认删除文件是否被占用\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("img",{attrs:{src:n(340)}}),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("确实被占用。根据第二列提供的pid，输入命令：kill -9 13117 杀掉进程。\n\n再次输入命令：df –lh 查看磁盘使用情况\n磁盘空间若被释放了。问题顺利处理了。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports},337:function(s,a,n){s.exports=n.p+"assets/img/1.ff5f1eef.png"},338:function(s,a,n){s.exports=n.p+"assets/img/2.84971ab5.png"},339:function(s,a,n){s.exports=n.p+"assets/img/3.dc69f727.png"},340:function(s,a,n){s.exports=n.p+"assets/img/4.0ffc6089.png"}}]);